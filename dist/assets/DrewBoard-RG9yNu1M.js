import{_ as b,r as d,c as i,o,a as e,d as C,F as M,b as B,j as D,w as I,t as S,e as F,O as N}from"./index-BN1cP4MY.js";import{E}from"./Excalidraw-Bao1WX4b.js";const x={class:"material-library"},O={class:"sidebar"},V={class:"sidebar-header"},J={class:"material-list"},L=["onClick"],R={class:"material-preview"},U=["src","alt"],$=["src"],j=["onClick"],A={class:"material-name"},W={class:"preview-area"},q={__name:"DrewBoard",emits:["close","select"],setup(z,{emit:m}){const u=m,v=d(null),_=()=>{const s=localStorage.getItem("materials");return s?JSON.parse(s):[]},p=s=>{localStorage.setItem("materials",JSON.stringify(s))},l=d(_()),r=d(null),f=()=>{v.value.click()},g=s=>{const t=s.target.files[0];if(!t)return;const a=new FileReader;a.onload=n=>{const c={id:Date.now(),name:t.name,preview:n.target.result,type:t.type.startsWith("image/")?"image":"video"};l.value.push(c),p(l.value)},a.readAsDataURL(t),s.target.value=""},y=s=>{l.value.splice(s,1),p(l.value)},k=()=>{u("close"),N.go(-1)},h=s=>{r.value=s},w=()=>{r.value&&u("select",r.value)};return(s,t)=>(o(),i("div",x,[e("div",{class:"header"},[e("div",{class:"back-icon",onClick:k},[...t[0]||(t[0]=[e("img",{src:C,alt:"返回"},null,-1)])]),t[1]||(t[1]=e("div",{class:"title"},"素材库",-1))]),e("div",O,[e("div",V,[t[3]||(t[3]=e("span",{class:"title"},"用户图片",-1)),e("input",{type:"file",ref_key:"fileInput",ref:v,accept:"image/*,video/*",style:{display:"none"},onChange:g},null,544),e("button",{class:"btn btn-secondary",onClick:f},[...t[2]||(t[2]=[e("span",null,"上传素材",-1)])])]),e("div",J,[(o(!0),i(M,null,B(l.value,(a,n)=>(o(),i("div",{key:n,class:"material-item",onClick:c=>h(a)},[e("div",R,[a.type==="image"?(o(),i("img",{key:0,src:a.preview,alt:a.name},null,8,U)):a.type==="video"?(o(),i("video",{key:1,src:a.preview,controls:""},null,8,$)):D("",!0),e("div",{class:"delete-btn",onClick:I(c=>y(n),["stop"])}," × ",8,j)]),e("div",A,S(a.name),1)],8,L))),128))])]),e("div",W,[F(E,{"initial-elements":[],"read-only":!1})]),e("div",{class:"footer"},[e("button",{class:"btn btn-primary",onClick:w},"保存")])]))}},K=b(q,[["__scopeId","data-v-c65dc15c"]]);export{K as default};
